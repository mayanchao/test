<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">    
    <link rel="icon" href="favicon.ico">
    <title>sample1</title>
    
     <link rel="stylesheet" href="http://code.jquery.com/ui/1.11.1/themes/smoothness/jquery-ui.css">
     
		<!-- �� Bootstrap ���� CSS �ļ� -->
		<link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.2.0/css/bootstrap.min.css">
		
		<!-- ��ѡ��Bootstrap�����ļ���һ�㲻�����룩 -->
		<link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
		
		<!-- jQuery�ļ��������bootstrap.min.js ֮ǰ���� -->
		<script src="http://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script>
		
		<!-- ���µ� Bootstrap ���� JavaScript �ļ� -->
		<script src="http://cdn.bootcss.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
		
		<script src="http://code.jquery.com/ui/1.11.1/jquery-ui.js"></script>
		
		<script src="js/jquery.json-2.4.js"  >  </script>
		<!-- ��˾ģ��js -->
		<script src="/web/busin/action/BusinTempletAction_commonjs.do1?moduleType=CompanyInfoTempletModule"  >  </script>
		
		<script src="/js/common.js"  >  </script>
		
		
		<style>
			
			/*
			 * Style tweaks
			 * --------------------------------------------------
			 */
			html,
			body {
			  overflow-x: hidden; /* Prevent scroll on narrow devices */
			}
			body {
			  padding-top: 70px;
			}
			footer {
			  padding: 30px 0;
			}
			
			/*
			 * Off Canvas
			 * --------------------------------------------------
			 */
			@media screen and (max-width: 767px) {
			  .row-offcanvas {
			    position: relative;
			    -webkit-transition: all .25s ease-out;
			         -o-transition: all .25s ease-out;
			            transition: all .25s ease-out;
			  }
			
			  .row-offcanvas-right {
			    right: 0;
			  }
			
			  .row-offcanvas-left {
			    left: 0;
			  }
			
			  .row-offcanvas-right
			  .sidebar-offcanvas {
			    right: -50%; /* 6 columns */
			  }
			
			  .row-offcanvas-left
			  .sidebar-offcanvas {
			    left: -50%; /* 6 columns */
			  }
			
			  .row-offcanvas-right.active {
			    right: 50%; /* 6 columns */
			  }
			
			  .row-offcanvas-left.active {
			    left: 50%; /* 6 columns */
			  }
			
			  .sidebar-offcanvas {
			    position: absolute;
			    top: 0;
			    width: 50%; /* 6 columns */
			  }
			}
		</style>
  </head>

  <body>
    <div class="navbar navbar-fixed-top navbar-inverse" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Project name</a>
        </div>
        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#contact">Contact</a></li>
          </ul>
        </div><!-- /.nav-collapse -->
      </div><!-- /.container -->
    </div><!-- /.navbar -->

    <div class="container">
	
		 <div class="row row-offcanvas row-offcanvas-right ">		 	
			<div class="col-xs-15 col-sm-12"  >
				
				
		          <ul   id="top-list-user" class="list-unstyled"   moduleframe="u33"  ><li >
<a  class='list-group-item'>
<div class="list-group" ondblclick="base_baseshow_company_js_com.config(this)" 
  	module-data={"id":"20140901235510703424440371ec24a7bb16ce697ce092ed5","param1":"dss","param2":"ss","param3":"ssss","moduleType":"CompanyInfoTempletModule"}
	id="20140901235510703424440371ec24a7bb16ce697ce092ed5"
   >
  <h2>dss</h2>
  <p>ss</p>
  <p><span class="glyphicon glyphicon-earphone"></span> ssss</p>            	
</div>
</a>
</li>
<li >
<a  class='list-group-item'>
<div class="list-group" ondblclick="base_baseshow_company_js_com.config(this)" 
  	module-data={"id":"201409020006182654c9d85c42a704db98ec97bb5405bb152","param1":"","param2":"","param3":"","moduleType":"CompanyInfoTempletModule"}
	id="201409020006182654c9d85c42a704db98ec97bb5405bb152"
   >
  <h2></h2>
  <p></p>
  <p><span class="glyphicon glyphicon-earphone"></span> </p>            	
</div>
</a>
</li>
<li >
<a  class='list-group-item'>
<div class="list-group" ondblclick="base_baseshow_company_js_com.config(this)" 
  	module-data={"id":"2014090123545150038d3882889954a6590272a51f3f02b38","param1":"cc","param2":"dd","param3":"sss","moduleType":"CompanyInfoTempletModule"}
	id="2014090123545150038d3882889954a6590272a51f3f02b38"
   >
  <h2>cc</h2>
  <p>dd</p>
  <p><span class="glyphicon glyphicon-earphone"></span> sss</p>            	
</div>
</a>
</li>

		          	<li >
		      			<a href="#" class="list-group-item">
					          <div class="jumbotron"  ondblclick="openConsole()"  >
					            <h1>Hello, world! <input type="button"  value="cccccc"></h1>
					            <p>This is an example to show the potential of an offcanvas layout pattern in Bootstrap. Try some responsive-range viewport sizes to see it in action.</p>
					          </div>
				          </a>
				    </li>		         
		          </ul>
				  <button type="button" 
				  		  class="btn btn-default btn-lg btn-block"
						  onclick="addNewTemplet('top-list-user',base_baseshow_company_js_com)" >add templete info</button>
				  			
        	</div>			
		</div>
		
		
			
		
      <div class="row row-offcanvas row-offcanvas-right">

  			<div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar" >
  				
  			<div class="list-group">
	            <a href="#" class="list-group-item active">Link1</a>
	            <a href="#" class="list-group-item">Link</a>
	            <a href="#" class="list-group-item">Link</a>
				<ul  id="left-list-id" class="list-unstyled"  moduleframe="u11"   ><li >
<a  class='list-group-item'>
<div class="list-group" ondblclick="base_baseshow_company_js_com.config(this)" 
  	module-data={"id":"2014083123073121885aa89a4abf74d5aace0b09fb918b4b3","param1":"s","param2":"cc","param3":"cc","moduleType":"CompanyInfoTempletModule"}
	id="2014083123073121885aa89a4abf74d5aace0b09fb918b4b3"
   >
  <h2>s</h2>
  <p>cc</p>
  <p><span class="glyphicon glyphicon-earphone"></span> cc</p>            	
</div>
</a>
</li>
<li >
<a  class='list-group-item'>
<div class="list-group" ondblclick="base_baseshow_company_js_com.config(this)" 
  	module-data={"id":"20140901220333812e6a64b05cde84593abb4989ce060335e","param1":"z","param2":"zzz","param3":"zzzz","moduleType":"CompanyInfoTempletModule"}
	id="20140901220333812e6a64b05cde84593abb4989ce060335e"
   >
  <h2>z</h2>
  <p>zzz</p>
  <p><span class="glyphicon glyphicon-earphone"></span> zzzz</p>            	
</div>
</a>
</li>

				</ul>            
	        </div>
          <button type="button" class="btn btn-default btn-lg btn-block"  onclick="addNewTemplet('left-list-id',base_baseshow_company_js_com)" >add templete info</button>
		  	
        </div><!--/span-->
        
		
        <div class="col-xs-12 col-sm-9">
        	
        	<!--
          <p class="pull-right visible-xs">
            <button type="button" class="btn btn-primary btn-xs" data-toggle="offcanvas">Toggle nav</button>
          </p>
          -->
          
          <ul   id="right-list-top" class="list-unstyled"   moduleframe="u22"  ><li >
<a  class='list-group-item'>
<div class="list-group" ondblclick="base_baseshow_company_js_com.config(this)" 
  	module-data={"id":"20140831230201484b045f4c3d901434b9b631dd8cfb49983","param1":"a","param2":"c","param3":"dd","moduleType":"CompanyInfoTempletModule"}
	id="20140831230201484b045f4c3d901434b9b631dd8cfb49983"
   >
  <h2>a</h2>
  <p>c</p>
  <p><span class="glyphicon glyphicon-earphone"></span> dd</p>            	
</div>
</a>
</li>
<li >
<a  class='list-group-item'>
<div class="list-group" ondblclick="base_baseshow_company_js_com.config(this)" 
  	module-data={"id":"20140831230752734460ba98e39db40d4ac97b6f6bf43f2c0","param1":"cc","param2":"ss","param3":"sss","moduleType":"CompanyInfoTempletModule"}
	id="20140831230752734460ba98e39db40d4ac97b6f6bf43f2c0"
   >
  <h2>cc</h2>
  <p>ss</p>
  <p><span class="glyphicon glyphicon-earphone"></span> sss</p>            	
</div>
</a>
</li>

          	<li >
      			<a href="#" class="list-group-item">
			          <div class="jumbotron"  ondblclick="openConsole()"  >
			            <h1>Hello, world! <input type="button"  value="cccccc"></h1>
			            <p>This is an example to show the potential of an offcanvas layout pattern in Bootstrap. Try some responsive-range viewport sizes to see it in action.</p>
			          </div>
		          </a>
		    </li>
	         
          </ul>
		  
          <button type="button" class="btn btn-default btn-lg btn-block"  onclick="addNewTemplet('right-list-top',base_baseshow_company_js_com)"  >add templete info</button>	
        
          
          <div class="row">
            <div class="col-6 col-sm-6 col-lg-4">
              <h2>Heading</h2>
              <p>Devouring Time,blunt thou the lion'paws,And make the earth devour her own sweet brood;Pluck the keen teeth from the fierce tiger's jaws,And burn the long--liv'd phoenix in her blood;Make glad and sorry seasons as thou fleets,And do whate'er thou wilt,swift--footed Time,To the wide world and all her fading sweets;But I forbid thee one most heinous crime, carve not with thy hours my love's fair brow,Nor draw no lines there with thine antique pen.Him in thy course untainted do allow,For beauty's pattern to succeeding men.Yet do thy worst,old Time;despite thy wrong,My love shall in my verse ever live young.</p>
              <p><a class="btn btn-default" href="#" role="button">View details &raquo;</a></p>
            </div><!--/span-->
            
            
            
            <div class="col-6 col-sm-6 col-lg-4">
              <h2>Heading</h2>
              <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
              <p><a class="btn btn-default" href="#" role="button">View details &raquo;</a></p>
            </div><!--/span-->
            <div class="col-6 col-sm-6 col-lg-4">
              <h2>Heading</h2>
              <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
              <p><a class="btn btn-default" href="#" role="button">View details &raquo;</a></p>
            </div><!--/span-->
            <div class="col-6 col-sm-6 col-lg-4">
              <h2>Heading</h2>
              <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
              <p><a class="btn btn-default" href="#" role="button">View details &raquo;</a></p>
            </div><!--/span-->
            <div class="col-6 col-sm-6 col-lg-4">
              <h2>Heading</h2>
              <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
              <p><a class="btn btn-default" href="#" role="button">View details &raquo;</a></p>
            </div><!--/span-->
            <div class="col-6 col-sm-6 col-lg-4">
              <h2>Heading</h2>
              <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
              <p><a class="btn btn-default" href="#" role="button">View details &raquo;</a></p>
            </div><!--/span-->
            
            <div class="col-6 col-sm-6 col-lg-4">
              <h2>Heading333</h2>
              <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
              <p><a class="btn btn-default" href="#" role="button">View details &raquo;</a></p>
            </div><!--/span-->
            
            
            
          </div><!--/row-->
        </div><!--/span-->

      
      </div><!--/row-->

      <hr>
<!--
      <footer>
        <p>&copy; Company 2014</p>
      </footer>
-->
    </div><!--/.container-->

<input type="button" value="initTemplet" onclick="loadHtmlinit('right-list-top')"  >



<!-- ���ý��� -->
	<div id="console"  >
				ddddddddddddddddd
	</div>	



	<div  id="mask" style="width:100px;height:200px;background-color:#C7EDCC;"   >
				<input type="button"  value="set" >
				<input type="button"  value="delete" >
				<input type="button"  value="moveup" >
				<input type="button"  value="movedown" >
	</div>

	
	<div id="templet_module_company"   ondblclick="company_config_open()"   >
		
		  <div class="form-group">
		    <label for="exampleInputEmail1">company name:</label>
		    <input type="email" class="form-control" id="exampleInputEmail1" placeholder="Enter email">
		  </div>
		  
		  <div class="form-group">
		    <label for="exampleInputEmail1">company address:</label>
		    <input type="email" class="form-control" id="exampleInputEmail1" placeholder="Enter email">
		  </div>
		  	
		  <div class="form-group">
		    <label for="exampleInputEmail1">first link:</label>
		    <input type="email" class="form-control" id="exampleInputEmail1" placeholder="Enter email">
		  </div>
		  <div class="form-group">
		    <label for="exampleInputEmail1">company context:</label>
		  	<textarea class="form-control" rows="3"></textarea>
		  </div>
		
	</div>
	
		
    
    
<script>
  $(function() {
	//查找所有 可以拖拽的组件  带有moduleframe 属性的，然后绑定拖拽事件
	$("ul[moduleframe]").sortable({
      placeholder: "ui-state-highlight",
	  deactivate: deactivateConfig
    });
    
  });
  
  
  //=========================最终生成一个js =============================
  
  
  
  //拖拽事件
  function deactivateConfig( event, ui ) { //拖拽排序位置
	  	//查找当前控件的位置
		var myid= ui.item.find("div").attr("id");
		
		ui.item.parent().children().each(function(index,element){
			//判断是否有相等ID
			var theId= $(element).find("div").attr("id");
			if(theId==myid){
				var myurl= "http://localhost:8080/web/busin/action/BusinTempletAction_moveLocation.do1?a=1";
				myurl +="&selfhelpTempletId=" + getUrlParam("selfhelpTempletId");//当前模板id主键	
				myurl +="&selfhelpTempletModuleId=" + theId;
				myurl +="&moduleContainLocation=" + index;
				
				//位置条换请求 到后台
					$.ajax({
						  type: "POST",
						  url: myurl,
						  async: true,//如果是同步，就为true，否则为false 不同步
						  success: function(data){
							  
		//					  var myJsonData =$.parseJSON(data);
							  var myHtml = "<li >" + 
				      			"<a  class='list-group-item'>" +
									data.showHtml	
						          + "</a>" +
						    	"</li>"
							  var newObj = $(myHtml);
						  	  $("#" + addTemlpeteUl).append(newObj);
						  	  //调用加载设置项事件
						  	  //http://localhost:8080/web/busin/action/BusinTempletAction_config.do1?moduleType=CompanyInfoTempletModule&id=201408231923541256dd226ae7f2b44a2bc00d8f1d71ff361&templetId=11
						  	  base_baseshow_company_js_com.config(addTemlpeteUl,data);
							  //出发控件的双击事件				  	  
							  //$("#" + addTemlpeteUl + " li:last div").trigger("ondblclick");
						   }
					});
					
			}
		})
		
	  	console.dir(ui);
		
		
		
	  }
  
  
  //�򿪿���̨����
  function openConsole(myobj){
  	
	var moduleData =  $(myobj).attr("module-data");	
	var myConsole = $.parseJSON(moduleData);
	//��ȡ���� Ȼ��ȥ��̨�������ý���
	var myContype = myConsole.contype ;
		var myurl = "http://localhost:8080/web/busin/action/BusinTempletAction_config.do1?templetName=CompanyInfoTempletModule&id=" + myConsole.id ;
     	$("#tempHtml").load(myurl,function(){
			var divHtml= $("#tempHtml").html();	
			var myHtml = "<li >" + 
      			"<a href='#' class='list-group-item'>" +
					divHtml 	
		          + "</a>" +
		    	"</li>"
			var newObj = $(myHtml);
			$("#" + addTemlpeteUl).append(newObj);
			//�����ؼ���˫���¼�
			$("#" + addTemlpeteUl + " li:last div").trigger("ondblclick");
			
		});
	
	console.dir(myConsole);
	
	}
    
		 //����µĿؼ�	
     function addNewTemplet(addTemlpeteUl,moduleObj ){
	 	alert(moduleObj);
		moduleObj.init(addTemlpeteUl);
	 		 
	 }
	 
	 $("#ccc111").dialog();
	 var globalFunction = {};
	 
  </script>

<div id="tempHtml" ></div>
  </body>
</html>
